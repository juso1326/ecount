# 修改目標 0225-3

---

## ✅ 角色權限
- 只有「總管理」不可刪除（系統保護）
- 預設建立 3 個可刪除角色：財務主管、專案經理、一般員工
- **檔案：** RoleController.php、roles/index.blade.php、RolePermissionSeeder.php、DefaultRolesAndPermissionsSeeder.php

---

## 1. 應付總表版面
**頁面：** https://abc123.ecount.test/payables
**設計稿：** https://dihpq5.axshare.com/#id=muiuf9&p=%E6%87%89%E4%BB%98%E7%B8%BD%E8%A1%A8&g=1
**修改內容：** 待確認設計稿細節

---

## 2. 出帳管理版面
**設計稿：** https://dihpq5.axshare.com/#id=lz3t7f&p=%E5%87%BA%E5%B8%B3%E7%AE%A1%E7%90%86&g=1
**修改內容：** 待確認設計稿細節

---

## 3. 一般設定頁版面
**設計稿：** https://dihpq5.axshare.com/#id=43fru5&p=set_gen&g=1
**修改內容：** 待確認設計稿細節

---

## 4. 帳戶設定頁版面
**設計稿：** https://dihpq5.axshare.com/#id=5kck9t&p=set_accunt&g=1
**修改內容：** 待確認設計稿細節

---

## ✅ 5. 專案頁 - 應收帳款快速編輯 modal JS
**頁面：** https://abc123.ecount.test/projects/35
**檔案：** resources/views/tenant/projects/show.blade.php
**完成：** 欄位 ID 已確認對應，JS 函式正常運作

---

## ✅ 6. 專案頁 - 應付帳款快速新增無效
**頁面：** https://abc123.ecount.test/projects/35
**檔案：** show.blade.php
**完成：** 移除 line 1005 多餘 `</script>`，修復所有 JS 函式被截斷問題

---

## ✅ 7. 用戶列表 - 參與專案隱藏結案/封存
**頁面：** https://abc123.ecount.test/users
**檔案：** UserController.php
**修改內容：**
- with(['projects']) → whereNotIn('status', ['closed', 'archived'])（已完成）

---

## ✅ 8. 用戶列表 - 預設顯示在職
**頁面：** https://abc123.ecount.test/users
**現況：** 已有 show_resigned 邏輯，預設隱藏離職（已確認正確）

---

## 9. 全站列表樣式統一
**影響頁面：** /projects、/payables、/receivables、/users、/companies
**修改內容：**
- th：px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase bg-gray-50
- td：px-3 py-2 text-sm whitespace-nowrap
- 操作按鈕樣式與排列位置統一

---

## 10. 應付總表 - 可篩選外開發票
**頁面：** https://abc123.ecount.test/payables
**修改內容：**
- 篩選區增加「發票類型」下拉：全部 / 有發票 / 無發票 / 外開
- PayableController::index() 加入對應 query

---

## ✅ 11. 銀行資訊 - 缺少預設選項
**頁面：** companies/edit + create
**問題：** DB 已有 is_default 欄位但 UI 無法設定
**修改內容：**
- 每筆銀行帳戶列加 radio（bank_accounts[N][is_default]）
- Controller 儲存：先全部 false，再設選中的為 true

---

## ✅ 12. 全站頂部選單 - 文字截斷
**問題：** 次選單寬度不足，「報表」等項目文字截斷
**修改內容：**
- 增加下拉選單 min-w
- 確認 dropdown 不被 overflow:hidden 裁切

---

## 13. 應收帳款列表 - 快速入帳與編輯合併
**頁面：** https://abc123.ecount.test/receivables
**修改內容：**
- 操作欄將「快速入帳」與「編輯」合併在同一 modal/lightbox

---

## ✅ 14. 應付帳款列表 - 快速入帳
**頁面：** https://abc123.ecount.test/payables
**修改內容：**
- 操作欄新增「快速入帳」按鈕
- 新增 quickPay modal（付款日/實付金額/付款方式）
- PayableController 新增 quickPay action

詳細 系統角色	
總管理 系統預設
45 個權限	2 位用戶	系統	系統保護 只有總管理系統保護, 其他都可以刪 但有預設值